{% extends "base.html" %}

{% block title %}Upload Pembayaran{% endblock %}

{% block content %}
<div class="container-fluid py-4">
  <div class="welcome-banner mb-4">
    <h3>Upload Bukti Pembayaran</h3>
    <p class="mb-0">Silakan lengkapi pembayaran untuk menyelesaikan proses pendaftaran Anda.</p>
  </div>

  <div class="stat-card">
    <div class="row">
      <div class="col-md-8">
        {% if formulir.pembayaran_status == 'approved' %}
          <div class="alert alert-success">
            <i class="bi bi-check-circle"></i> Pembayaran Anda telah diverifikasi dan diterima.
          </div>
        {% elif formulir.pembayaran_status == 'pending' %}
          <div class="alert alert-warning">
            <i class="bi bi-clock"></i> Pembayaran Anda sedang dalam proses verifikasi.
          </div>
        {% elif formulir.pembayaran_status == 'rejected' %}
          <div class="alert alert-danger">
            <i class="bi bi-exclamation-circle"></i> Pembayaran Anda ditolak. Silakan upload ulang bukti pembayaran yang valid.
          </div>
        {% endif %}

        {% if formulir.pembayaran_status != 'approved' %}
          <form method="POST" enctype="multipart/form-data">
            <div class="stat-card mb-4">
              <h5 class="mb-3">Informasi Rekening</h5>
              <p class="mb-2"><strong>Bank BRI</strong></p>
              <p class="mb-2">No. Rekening: 1234-5678-9012-3456</p>
              <p class="mb-0">Atas Nama: NAMA SEKOLAH</p>
            </div>
            
            <div class="mb-4">
              <label class="form-label">Upload Bukti Transfer</label>
              <input type="file" class="form-control" name="pembayaran" accept="image/*" required>
              <small class="text-muted">Format yang diterima: JPG, PNG, PDF. Maksimal 2MB</small>
            </div>
            <button type="submit" class="btn btn-primary">
              <i class="bi bi-cloud-upload"></i> Kirim Bukti Pembayaran
            </button>
          </form>
        {% endif %}
      </div>

      <div class="col-md-4">
        {% if formulir.pembayaran_path %}
          <div class="stat-card">
            <h5 class="mb-3">Bukti Pembayaran Terakhir</h5>
            <img src="{{ url_for('uploaded_file', filename=formulir.pembayaran_path.split('/')[-1]) }}" 
                 class="img-fluid rounded" alt="Bukti pembayaran">
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
