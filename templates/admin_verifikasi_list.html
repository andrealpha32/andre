<!DOCTYPE html>
<html>

<head>
  <title>Admin - Verifikasi Pengguna</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
  <div class="layout">
    <div class="sidebar">
      <div class="logo">Admin Panel</div>
      <div class="sidebar-menu">
        <a href="{{ url_for('admin_dashboard_view') }}">Dashboard</a>
        <a href="{{ url_for('admin_verifikasi_list') }}">Verifikasi Pengguna</a>
        <a href="{{ url_for('admin_logout') }}">Logout</a>
      </div>
    </div>

    <div class="main-content">
      <div class="card">
        <h2>Daftar Verifikasi Pengguna</h2>

        {% for user in pengguna %}
        <div class="card">
          <p><strong>Username:</strong> {{ user.username }}</p>
          <p><strong>Nama:</strong> {{ user.formulir[0].nama_lengkap }}</p>
          <p><strong>Tempat/Tanggal Lahir:</strong> {{ user.formulir[0].tempat_lahir }} / {{ user.formulir[0].tanggal_lahir
            }}</p>
          <p><strong>Jenis Kelamin:</strong> {{ user.formulir[0].jenis_kelamin }}</p>
          <p><strong>Alamat:</strong> {{ user.formulir[0].alamat }}</p>
          <p><strong>Asal Sekolah:</strong> {{ user.formulir[0].asal_sekolah }}</p>
          <p><strong>No HP:</strong> {{ user.formulir[0].no_hp }}</p>

          {% if user.formulir[0].foto_path %}
          <p><strong>Foto:</strong><br>
            <img src="{{ url_for('uploaded_file', filename=user.formulir[0].foto_path.split('/')[-1]) }}" width="150">
          </p>
          {% endif %}

          {% if user.formulir[0].ijazah_path %}
          <p><strong>Ijazah:</strong><br>
            <a href="{{ url_for('uploaded_file', filename=user.formulir[0].ijazah_path.split('/')[-1]) }}" target="_blank">Lihat
              Ijazah</a>
          </p>
          {% endif %}

          {% if user.formulir[0].pembayaran_path %}
          <p><strong>Pembayaran:</strong><br>
            <a href="{{ url_for('uploaded_file', filename=user.formulir[0].pembayaran_path.split('/')[-1]) }}" target="_blank">Lihat
              Bukti Pembayaran</a>
            <br>
            <strong>Status Pembayaran:</strong>
            {% if user.formulir[0].pembayaran_status == 'approved' %}
              <span style="color: var(--accent)">✅ Diterima</span>
              <br>
              <a href="{{ url_for('verifikasi_pembayaran', user_id=user.id, action='tolak') }}" class="btn">❌ Ubah ke Tolak</a>
            {% elif user.formulir[0].pembayaran_status == 'rejected' %}
              <span style="color: #ff4444">❌ Ditolak</span>
              <br>
              <a href="{{ url_for('verifikasi_pembayaran', user_id=user.id, action='terima') }}" class="btn">✅ Ubah ke Terima</a>
            {% elif user.formulir[0].pembayaran_status == 'pending' %}
              <span style="color: #ffbb33">⏳ Menunggu Verifikasi</span>
              <br>
              <a href="{{ url_for('verifikasi_pembayaran', user_id=user.id, action='terima') }}" class="btn">✅ Terima</a>
              <a href="{{ url_for('verifikasi_pembayaran', user_id=user.id, action='tolak') }}" class="btn">❌ Tolak</a>
            {% endif %}
          </p>
          {% endif %}

          <p><strong>Status Verifikasi:</strong>
            {% if user.formulir[0].verifikasi_status == 'approved' %}
            <span style="color: var(--accent)">✅ Diterima</span>
            <br>
            <a href="{{ url_for('proses_verifikasi', user_id=user.id, action='tolak') }}" class="btn">❌ Ubah ke Tolak</a>
            {% elif user.formulir[0].verifikasi_status == 'rejected' %}
            <span style="color: #ff4444">❌ Ditolak</span>
            <br>
            <a href="{{ url_for('proses_verifikasi', user_id=user.id, action='terima') }}" class="btn">✅ Ubah ke Terima</a>
            {% else %}
            <span style="color: #ffbb33">⏳ Menunggu Verifikasi</span>
            <br>
            <a href="{{ url_for('proses_verifikasi', user_id=user.id, action='terima') }}" class="btn">✅ Terima</a>
            <a href="{{ url_for('proses_verifikasi', user_id=user.id, action='tolak') }}" class="btn">❌ Tolak</a>
            {% endif %}
          </p>
        </div>
        {% else %}
        <p>Tidak ada data pengguna yang perlu diverifikasi.</p>
        {% endfor %}
      </div>
    </div>
  </div>
</body>

</html>