<!DOCTYPE html>
<html>

<head>
  <title>Verifikasi Akun</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
  {% extends "base.html" %}

  {% block title %}Form Pendaftaran{% endblock %}

  {% block content %}
  <div class="container">
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <h5 class="mb-3">Status Verifikasi</h5>
            {% if formulir %}
            {% set progress = 100 if formulir.verifikasi_status == 'approved' and formulir.pembayaran_status == 'approved'
                        else 75 if formulir.verifikasi_status == 'approved'
                        else 50 if formulir.verifikasi_status == 'pending'
                        else 25 if formulir.verifikasi_status == 'rejected'
                        else 0 %}
            <div class="progress" style="height: 25px;">
              <div class="progress-bar {{ 'bg-success' if formulir.verifikasi_status == 'approved' and formulir.pembayaran_status == 'approved'
                                    else 'bg-info' if formulir.verifikasi_status == 'approved'
                                    else 'bg-warning' if formulir.verifikasi_status == 'pending'
                                    else 'bg-danger' }}" 
                   role="progressbar" 
                   style="width: {{ progress }}%"
                   aria-valuenow="{{ progress }}" 
                   aria-valuemin="0" 
                   aria-valuemax="100">
                {{ "Selesai" if formulir.verifikasi_status == 'approved' and formulir.pembayaran_status == 'approved'
                   else "Menunggu Pembayaran" if formulir.verifikasi_status == 'approved'
                   else formulir.verifikasi_status|title if formulir.verifikasi_status 
                   else 'Belum Mengisi' }} - {{ progress }}%
              </div>
            </div>
            <div class="small mt-2 text-muted">
              {% if formulir.verifikasi_status == 'approved' %}
                Selamat! Pendaftaran Anda telah disetujui
              {% elif formulir.verifikasi_status == 'pending' %}
                Menunggu verifikasi admin
              {% elif formulir.verifikasi_status == 'rejected' %}
                Pendaftaran ditolak, silahkan periksa kembali dokumen Anda
              {% else %}
                Silahkan lengkapi formulir pendaftaran
              {% endif %}
            </div>
            {% else %}
            <div class="progress" style="height: 25px;">
              <div class="progress-bar bg-secondary" style="width: 25%">
                Belum Mengisi
              </div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <h2 class="mb-4">Formulir Pendaftaran</h2>
        <div class="card">
          <div class="card-body">
            <form method="POST" enctype="multipart/form-data">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Nama Lengkap</label>
                  <input class="form-control" name="nama_lengkap" required
                    value="{{ formulir.nama_lengkap if formulir }}">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Tempat Lahir</label>
                  <input class="form-control" name="tempat_lahir" required
                    value="{{ formulir.tempat_lahir if formulir }}">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Tanggal Lahir</label>
                  <input type="date" class="form-control" name="tanggal_lahir" required
                    value="{{ formulir.tanggal_lahir if formulir }}">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Jenis Kelamin</label>
                  <select class="form-control" name="jenis_kelamin" required>
                    <option value="">Pilih Jenis Kelamin</option>
                    <option value="Laki-laki"
                      {% if formulir.jenis_kelamin == 'Laki-laki' %}selected{% endif %}>Laki-laki</option>
                    <option value="Perempuan"
                      {% if formulir.jenis_kelamin == 'Perempuan' %}selected{% endif %}>Perempuan</option>
                  </select>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Alamat Lengkap</label>
                  <textarea class="form-control" name="alamat" required>{{ formulir.alamat if formulir }}</textarea>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Asal Sekolah</label>
                  <input class="form-control" name="asal_sekolah" required
                    value="{{ formulir.asal_sekolah if formulir }}">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Nomor HP</label>
                  <input class="form-control" name="no_hp" required value="{{ formulir.no_hp if formulir }}">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Foto Diri</label>
                  <input type="file" class="form-control" name="foto" required>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Ijazah</label>
                  <input type="file" class="form-control" name="ijazah" required>
                </div>
              </div>
              <div class="mt-4">
                <button type="submit" class="btn btn-primary">Kirim Formulir</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endblock %}
</body>

</html>