<!DOCTYPE html>
<html>

<head>
  <title>Verifikasi Akun</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
  {% extends "base.html" %}

  {% block title %}Form Pendaftaran{% endblock %}

  {% block content %}
  <div class="container">
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <h5 class="mb-3">Status Verifikasi</h5>
            {% if formulir %}
            <div class="d-flex justify-content-between position-relative mb-4">
              <div class="progress" style="height: 3px; width: 100%; position: absolute; top: 50%; transform: translateY(-50%);">
                <div class="progress-bar {% if formulir.verifikasi_status != '' %}bg-success{% endif %}" style="width: {{ progress }}%;"></div>
              </div>
              
              <div class="position-relative">
                <div class="rounded-circle bg-{{ 'success' if formulir.verifikasi_status != '' else 'secondary' }} text-white d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">1</div>
                <div class="small mt-2">Pengisian Form</div>
              </div>
              
              <div class="position-relative">
                <div class="rounded-circle bg-{{ 'success' if formulir.verifikasi_status == 'pending' or formulir.verifikasi_status == 'approved' else 'secondary' }} text-white d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">2</div>
                <div class="small mt-2">Verifikasi</div>
              </div>
              
              <div class="position-relative">
                <div class="rounded-circle bg-{{ 'success' if formulir.verifikasi_status == 'approved' else 'secondary' }} text-white d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">3</div>
                <div class="small mt-2">Pembayaran</div>
              </div>
              
              <div class="position-relative">
                <div class="rounded-circle bg-{{ 'success' if formulir.verifikasi_status == 'approved' and formulir.pembayaran_status == 'approved' else 'secondary' }} text-white d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">4</div>
                <div class="small mt-2">Selesai</div>
              </div>
            </div>
            <div class="small mt-2 text-muted">
              {% if formulir.verifikasi_status == 'approved' %}
                Selamat! Pendaftaran Anda telah disetujui
              {% elif formulir.verifikasi_status == 'pending' %}
                Menunggu verifikasi admin
              {% elif formulir.verifikasi_status == 'rejected' %}
                Pendaftaran ditolak, silahkan periksa kembali dokumen Anda
              {% else %}
                Silahkan lengkapi formulir pendaftaran
              {% endif %}
            </div>
            {% else %}
            <div class="progress" style="height: 25px;">
              <div class="progress-bar bg-secondary" style="width: 25%">
                Belum Mengisi
              </div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <h2 class="mb-4">Formulir Pendaftaran</h2>
        <div class="card">
          <div class="card-body">
            <form method="POST" enctype="multipart/form-data">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Nama Lengkap</label>
                  <input class="form-control" name="nama_lengkap" required
                    value="{{ formulir.nama_lengkap if formulir }}">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Tempat Lahir</label>
                  <input class="form-control" name="tempat_lahir" required
                    value="{{ formulir.tempat_lahir if formulir }}">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Tanggal Lahir</label>
                  <input type="date" class="form-control" name="tanggal_lahir" required
                    value="{{ formulir.tanggal_lahir if formulir }}">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Jenis Kelamin</label>
                  <select class="form-control" name="jenis_kelamin" required>
                    <option value="">Pilih Jenis Kelamin</option>
                    <option value="Laki-laki"
                      {% if formulir.jenis_kelamin == 'Laki-laki' %}selected{% endif %}>Laki-laki</option>
                    <option value="Perempuan"
                      {% if formulir.jenis_kelamin == 'Perempuan' %}selected{% endif %}>Perempuan</option>
                  </select>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Alamat Lengkap</label>
                  <textarea class="form-control" name="alamat" required>{{ formulir.alamat if formulir }}</textarea>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Asal Sekolah</label>
                  <input class="form-control" name="asal_sekolah" required
                    value="{{ formulir.asal_sekolah if formulir }}">
                </div>

                <div class="col-md-6 mb-3">
                  <label class="form-label">No. HP</label>
                  <input class="form-control" name="no_hp" type="tel" required 
                    value="{{ formulir.no_hp if formulir }}">
                </div>

                <div class="col-md-6 mb-3">
                  <label class="form-label">Jurusan yang Dipilih</label>
                  <select class="form-control" name="jurusan" required>
                    <option value="">Pilih Jurusan</option>
                    <option value="IPA" {% if formulir.jurusan == 'IPA' %}selected{% endif %}>IPA</option>
                    <option value="IPS" {% if formulir.jurusan == 'IPS' %}selected{% endif %}>IPS</option>
                    <option value="Bahasa" {% if formulir.jurusan == 'Bahasa' %}selected{% endif %}>Bahasa</option>
                  </select>
                </div>

                <div class="col-md-6 mb-3">
                  <label class="form-label">Foto Diri</label>
                  <input type="file" class="form-control" name="foto" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ijazah</label>
                  <input type="file" class="form-control" name="ijazah" required>
                </div>
              </div>
              <div class="mt-4">
                <button type="submit" class="btn btn-primary">Kirim Formulir</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endblock %}
</body>

</html>